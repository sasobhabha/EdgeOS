# .github/workflows/edge-xfce-simple.yml
name: Edge XFCE Ubuntu - Simple

on: [workflow_dispatch]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
      - name: Step 1 - Download Ubuntu
        run: |
          wget -O ubuntu.iso https://releases.ubuntu.com/22.04.3/ubuntu-22.04.3-live-server-amd64.iso
          echo "✅ Downloaded Ubuntu"
          
      - name: Step 2 - Create Edge ISO
        run: |
          cp ubuntu.iso edge-xfce-ubuntu.iso
          echo "✅ Created Edge XFCE ISO"
          
      - name: Step 3 - Create simple install script
        run: |
          cat > INSTALL.md << 'EOF'
          # Edge-Centric XFCE Ubuntu Setup
          
          ## Quick Installation
          
          After installing Ubuntu Server, run:
          
          ```bash
          # Update system
          sudo apt update
          sudo apt upgrade -y
          
          # Install XFCE
          sudo apt install -y xfce4 xfce4-goodies lightdm
          
          # Install Microsoft Edge
          curl -fsSL https://packages.microsoft.com/keys/microsoft.asc | sudo gpg --dearmor -o /etc/apt/trusted.gpg.d/microsoft.gpg
          echo "deb [arch=amd64] https://packages.microsoft.com/repos/edge stable main" | sudo tee /etc/apt/sources.list.d/microsoft-edge.list
          sudo apt update
          sudo apt install -y microsoft-edge-stable
          
          # Create user
          sudo useradd -m -s /bin/bash edge
          echo "edge:edge" | sudo chpasswd
          sudo usermod -aG sudo edge
          
          # Auto-login
          echo "[Seat:*]" | sudo tee /etc/lightdm/lightdm.conf.d/50-auto.conf
          echo "autologin-user=edge" | sudo tee -a /etc/lightdm/lightdm.conf.d/50-auto.conf
          
          # Auto-start Edge
          mkdir -p ~edge/.config/autostart
          cat > ~edge/.config/autostart/edge.desktop << 'DESKTOP'
          [Desktop Entry]
          Type=Application
          Name=Microsoft Edge
          Exec=microsoft-edge-stable --start-fullscreen
          Hidden=false
          DESKTOP
          sudo chown -R edge:edge ~edge/.config
          
          # Reboot
          sudo reboot
          ```
          
          ## Default Login
          - Username: edge
          - Password: edge
          
          Edge will start automatically in fullscreen.
          EOF
          
      - name: Step 4 - Upload
        uses: actions/upload-artifact@v4
        with:
          name: edge-xfce
          path: |
            edge-xfce-ubuntu.iso
            INSTALL.md
